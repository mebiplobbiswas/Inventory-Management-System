@using Logistic_Inventory.ViewModels

@{
    ViewBag.Title = "Products Stock";
    var i = 1;
    var totalAmt = 0;

    ViewBag.page = "reports";
}


<link rel="stylesheet" type="text/css" href="~/Content/datatable/jquery.dataTables.css">

<script type="text/javascript" charset="utf8" src="~/Scripts/datatable/jquery.dataTables.js"></script>

<div class="header bg-primary-grey pb-6">
    <div class="container-fluid">
        <div class="header-body">
            <div class="row align-items-center py-4">
                <div class="col-lg-6 col-7">
                    <h6 class="h2 text-white d-inline-block mb-0">Stocks Report</h6>
                    <nav aria-label="breadcrumb" class="d-none d-md-inline-block ml-md-4">
                        <ol class="breadcrumb breadcrumb-links breadcrumb-dark">
                            <li class="breadcrumb-item"><a href="@Url.Content("~/home")"><i class="fas fa-home"></i></a></li>
                            <li class="breadcrumb-item"><a href="@Url.Content("~/home")">Reports</a></li>
                            <li class="breadcrumb-item active" aria-current="page">Stocks </li>
                        </ol>
                    </nav>
                </div>
                <div class="col-lg-6 col-5 text-right">



                    <button class="btn  btn-default" id="printNow">
                        <i class="fa fa-print"> </i> Print
                    </button>


                </div>
            </div>
        </div>
    </div>
</div>

<!-- Page content -->
<div class="container-fluid mt--6">
    <div class="row justify-content-center">
        <div class=" col ">
            <div class="card">

                <div class="card-body">
                    <table class="table    display table-hover table-bordered" id="print">
                        <thead>
                            <tr>
                                <th>SL</th>
                                <th>
                                    Products Name
                                </th>
                                <td>Code</td>
                                <th>
                                    In Item
                                </th>
                                <th>
                                    Out Item
                                </th>
                                <th>
                                    Balance
                                </th>

                                <th>Unit</th>
                                <th>
                                    Unit Price
                                </th>

                                <th>Total Amount</th>

                            </tr>
                        </thead>

                        <tbody>
                            @foreach (var item in ViewData["Data"] as List<StockDTO>)
                            {
                                var balance = item.InItem - item.OutItem;
                                var total = balance * (int)item.UnitPrice;

                                <tr>
                                    <td>
                                        @i
                                    </td>
                                    <td>
                                        @item.ProductName
                                    </td>
                                    <td>@item.ProductCode</td>
                                    <td>
                                        @item.InItem
                                    </td>
                                    <td>
                                        @item.OutItem
                                    </td>
                                    <td>
                                        @balance
                                    </td>
                                    <td>
                                        @item.Unit
                                    </td>
                                    <td>
                                        @item.UnitPrice
                                    </td>

                                    <td>


                                        @total

                                    </td>

                                </tr>
                                totalAmt += Convert.ToInt32(total);
                                i++;
                            }
                        </tbody>

                        <tfoot>
                            <tr>
                                <td></td>
                                <td colspan="7" class="font26" style="text-align:center"><b>Total</b>  </td>
                                <td class="font26"> <u><b>@Convert.ToInt64(totalAmt)</b> </u> </td>

                            </tr>

                        </tfoot>
                    </table>

                </div>
            </div>
        </div>
    </div>


</div>




<style>
    .font26 {
        font-size: 20px;
    }
</style>


<script>

    var width = window.innerWidth || document.documentElement.clientWidth || document.body.clientWidth;


    if (width < 900) {
        $("table").addClass("table-responsive");
    }

    $("#printNow").click(function () {

        var toPrint = document.getElementById('print');

        var popupWin = window.open('', '', 'toolbar=yes,scrollbars=yes,resizable=yes,width=800,height=800,location=no,left=200px');
        popupWin.document.open();
        popupWin.document.write('<html><head><title>Product Stock Report </title><style>  .list-group-item  { border:none; } li.borderless { border-top: 0 none;border-bottom:0 none; } .no-border{ border:none; } h1{font-size:20px} h4{font-size:14px}  .no-print{display: none;} .table > thead > tr > th, .table > tbody > tr > th, .table > tfoot > tr > th, .table > thead > tr > td, .table > tbody > tr > td, .table > tfoot > tr > td{ }a[href]:after {content: none !important;}      </style><link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">  <link href="/Content/site2.css" rel="stylesheet"/></head>');

        popupWin.document.write('<body onload="window.print(); " style="padding:5%"> <div >  ');

        popupWin.document.write('<img src="/Content/img/logo/banner_500.png" width="420" /> ');
        popupWin.document.write('<h3>Products Stock Report </h3>');
        popupWin.document.write('<table class="table table-responsive  table-hover table-bordered" style="font-size:12px" id="print">');
        popupWin.document.write(toPrint.innerHTML);
        popupWin.document.write('</table>');




        popupWin.document.write('</div></body></html>');
        popupWin.document.close();

    });

    $("table").dataTable();

</script>

